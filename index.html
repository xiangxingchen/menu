<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>固定导航</title>
	<link rel="stylesheet" href="css/style.css" type="text/css">
	<script src="http://libs.baidu.com/jquery/1.10.2/jquery.js"></script>
</head>
<body>
	<div id="menu">
		<ul>
			<li><a href="#item1" class="current">1F 男装</a></li>
			<li><a href="#item2">2F 女装</a></li>
			<li><a href="#item3">3F 数码</a></li>
			<li><a href="#item4">4F 图书</a></li>
			<li><a href="#item5">5F 零食</a></li>
		</ul>
	</div>
	<div id="content">
		<h1>风景美图</h1>
		<div id="item1" class="item">
			<h2>1F 男装</h2>
				<ul>
					<li><a href="#"><img src="pic/t1.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t1.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t1.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t1.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t1.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t1.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t1.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t1.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t1.jpg" alt=""></a></li>
				</ul>
		</div>
		<div id="item2" class="item">
			<h2>2F 女装</h2>
				<ul>
					<li><a href="#"><img src="pic/t2.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t2.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t2.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t2.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t2.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t2.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t2.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t2.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t2.jpg" alt=""></a></li>
				</ul2
		</div>
		<div id="item3" class="item">
			<h2>3F 数码</h2>
				<ul>
					<li><a href="#"><img src="pic/t3.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t3.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t3.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t3.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t3.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t3.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t3.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t3.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t3.jpg" alt=""></a></li>
				</ul>
		</div>
		<div id="item4" class="item">
			<h2>4F 图书</h2>
				<ul>
					<li><a href="#"><img src="pic/t4.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t4.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t4.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t4.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t4.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t4.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t4.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t4.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t4.jpg" alt=""></a></li>
				</ul>
		</div>
		<div id="item5" class="item">
			<h2>5F 零食</h2>
				<ul>
					<li><a href="#"><img src="pic/t5.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t5.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t5.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t5.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t5.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t5.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t5.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t5.jpg" alt=""></a></li>
					<li><a href="#"><img src="pic/t5.jpg" alt=""></a></li>
				</ul>
		</div>
	</div>
	<script>
	/*$(document).ready(function() {
		$(window).scroll(function() {
			var top=$(document).scrollTop();
			var menu=$("#menu");
			var items=$("#content").find(".item");

			var currentId="";
			items.each(function() {
				var m=$(this);
				var itemtop=m.offset().top;
				if(top>itemtop-200){
					currentId="#"+m.attr("id");
				}else{
					return false;
				}
			});

			var currentlink=menu.find(".current");
			if(currentId && currentlink.attr("href")!=currentId){
				currentlink.removeClass("current");
				menu.find("[href="+currentId+"]").addClass("current");
			}
		});
	});*/
	</script>
	<script type="text/javascript">
		 function getByClassName( obj, cls ){
        var elements=obj.getElementsByTagName("*");
        var result = [];
        for ( var i=0; i<elements.length;i++){
            if (elements[i].className == cls){
                result.push(elements[i]);
            }
        }
        return result;
    }
    
    function hasClass( obj, cls ){ 
        return obj.className.match(new RegExp("(\\s|^)" + cls + "(\\s|$)"));
    }
    
	function removeClass( obj, cls ){ 
	    if( hasClass( obj, cls )){ 
		    //remove
			var reg = new RegExp("(\\s|^)" + cls + "(\\s|$)");
			obj.className = obj.className.replace(reg, "");
		}
	}	
	
    //定义addClass函数，让函数实现给对象增加class 
    function addClass( obj, cls){
        if(!hasClass(obj,cls)){
            obj.className += " " +cls;
        }
    }
	
	window.onload = function(){ 
		
	    window.onscroll = function(){ 		
		    //var top = document.documentElement ? document.documentElement.scrollTop : document.body.scrollTop;
    		var top = document.documentElement.scrollTop || document.body.scrollTop;
			
			var menus = document.getElementById("menu").getElementsByTagName("a");
			
			var items = getByClassName(document.getElementById("content"), "item");
			
			var currentId = "";
			
			for ( var i=0; i< items.length; i++ ){ 
			    var _item = items[i];
			    var _itemTop = _item.offsetTop;
				if( top > _itemTop - 200 ){ 
				    currentId = _item.id;
				} else { 
				    break;
				}			
			}
		
			 				
			  //请补充此处代码，给正确的menu下的a元素class赋值current
			  if (currentId){
				  for ( var j=0;j<menus.length;j++){
					  var _menu=menus[j];
					  var _href=_menu.href.split("#");
					  
					  if (_href[_href.length - 1] != currentId){
						  removeClass(_menu,"current");
					  }else{
						  addClass(_menu,"current");
					  }
				  }
			  }
      
	
		}	
	}	
	</script>
</body>
</html>